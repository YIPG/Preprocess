import re
import mojimoji
import sys
import MeCab
from gensim import corpora
import os
import time
from tqdm import tqdm
from time import sleep


def clean_text(text):  # ã‚´ãƒŸå‡¦ç†
    replaced_text = '\n'.join(s.strip() for s in text.splitlines()[
                              0:] if s != '')  # ãƒ˜ãƒƒãƒ€ãƒ¼ãŒã‚ã‚Œã°å‰Šé™¤(ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ã—ãªãã¦ã‚ˆã„)
    replaced_text = replaced_text.lower()
    replaced_text = re.sub(r'[â– â– â—â˜…â—†â—‡â–¼â™¡]', ' ', replaced_text)
    replaced_text = re.sub(r'ã€€', ' ', replaced_text)  # å…¨è§’ç©ºç™½ã®é™¤å»
    replaced_text = re.sub(r'[ê°€-í£]*', '', replaced_text)  # ãƒãƒ³ã‚°ãƒ«å‰Šé™¤
    replaced_text = re.sub(
        r'[0-9]+(æ™‚|åˆ†|å¹´|æœˆ|æ—¥|ç§’|å††|ç‚¹|å|\/|:|-)[0-9]+', '', replaced_text)  # æ•°å­—è¡¨ç¾ã‚’é™¤å»
    replaced_text = re.sub(r'[ğŸ¤ğŸ¤‘ğŸ¤’ğŸ¤“ğŸ¤”ğŸ¤•ğŸ¤–ğŸ¤—ğŸ¤˜ğŸ¤™ğŸ¤šğŸ¤›ğŸ¤œğŸ¤ğŸ¤ğŸ¤ ğŸ¤¡ğŸ¤¢ğŸ¤£ğŸ¤¤ğŸ¤¥ğŸ¤¦ğŸ¤§ğŸ¤°ğŸ¤³ğŸ¤´ğŸ¤µğŸ¤¶ğŸ¤·ğŸ¤¸ğŸ¤¹ğŸ¤ºğŸ¤»ğŸ¤¼ğŸ¤½ğŸ¤¾ğŸ¥€ğŸ¥ğŸ¥‚ğŸ¥ƒğŸ¥„ğŸ¥…ğŸ¥†ğŸ¥‡ğŸ¥ˆğŸ¥‰ğŸ¥ŠğŸ¥‹ğŸ¥ğŸ¥‘ğŸ¥’ğŸ¥“ğŸ¥”ğŸ¥•ğŸ¥–ğŸ¥—ğŸ¥˜ğŸ¥™ğŸ¥šğŸ¥›ğŸ¥œğŸ¥ğŸ¥ğŸ¦€ğŸ¦ğŸ¦‚ğŸ¦ƒğŸ¦„ğŸ¦…ğŸ¦†ğŸ¦‡ğŸ¦ˆğŸ¦‰ğŸ¦ŠğŸ¦‹ğŸ¦ŒğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦‘ğŸ§€ğŸ—ºğŸ—»ğŸ—¼ğŸ—½ğŸ—¾ğŸ—¿ğŸ˜€ğŸ˜ğŸ˜‚ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‡ğŸ˜ˆğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ŒğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜‘ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ˜–ğŸ˜—ğŸ˜˜ğŸ˜™ğŸ˜šğŸ˜›ğŸ˜œğŸ˜ğŸ˜ğŸ˜ŸğŸ˜ ğŸ˜¡ğŸ˜¢ğŸ˜£ğŸ˜¤ğŸ˜¥ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜©ğŸ˜ªğŸ˜«ğŸ˜¬ğŸ˜­ğŸ˜®ğŸ˜¯ğŸ˜°ğŸ˜±ğŸ˜²ğŸ˜³ğŸ˜´ğŸ˜µğŸ˜¶ğŸ˜·ğŸ˜¸ğŸ˜¹ğŸ˜ºğŸ˜»ğŸ˜¼ğŸ˜½ğŸ˜¾ğŸ˜¿ğŸ™€ğŸ™ğŸ™‚ğŸ™ƒğŸ™„ğŸ™…ğŸ™†ğŸ™‡ğŸ™ˆğŸ™‰ğŸ™ŠğŸ™‹ğŸ™ŒğŸ™ğŸ™ğŸ™ğŸ•‰ğŸ•ŠğŸ•‹ğŸ•ŒğŸ•ğŸ•ğŸ•ğŸ•ğŸ•‘ğŸ•’ğŸ•“ğŸ•”ğŸ••ğŸ•–ğŸ•—ğŸ•˜ğŸ•™ğŸ•šğŸ•›ğŸ•œğŸ•ğŸ•ğŸ•ŸğŸ• ğŸ•¡ğŸ•¢ğŸ•£ğŸ•¤ğŸ•¥ğŸ•¦ğŸ•§ğŸ‡¬ğŸ‡­ğŸ‡®ğŸ‡¯ğŸ‡°ğŸ‡±ğŸ‡²ğŸ‡³ğŸ‡´ğŸ‡µğŸ‡¶ğŸ‡·ğŸ‡¸ğŸ‡¹ğŸ‡ºğŸ‡»ğŸ‡¼ğŸ‡½ğŸ‡¾ğŸ‡¿ğŸˆ€ğŸˆğŸˆ‚ğŸˆğŸˆ‘ğŸˆ’ğŸˆ“ğŸˆ”ğŸˆ•ğŸˆ–ğŸˆ—ğŸˆ˜ğŸˆ™ğŸˆšğŸˆ›ğŸˆœğŸˆğŸˆğŸˆŸğŸˆ ğŸˆ¡ğŸˆ¢ğŸˆ£ğŸˆ¤ğŸˆ¥ğŸˆ¦ğŸˆ§ğŸˆ¨ğŸˆ©ğŸˆªğŸˆ«ğŸˆ¬ğŸˆ­ğŸˆ®ğŸˆ¯ğŸˆ°ğŸˆ±ğŸˆ²ğŸˆ³ğŸˆ´ğŸˆµğŸˆ¶ğŸˆ·ğŸˆ¸ğŸˆ¹ğŸˆºğŸˆ»ğŸ‰€ğŸ‰ğŸ‰‚ğŸ‰ƒğŸ‰„ğŸ‰…ğŸ‰†ğŸ‰‡ğŸ‰ˆğŸ‰ğŸ‰‘ğŸŒ€ğŸŒğŸŒ‚ğŸŒƒğŸŒ„ğŸŒ…ğŸŒ†ğŸŒ‡ğŸŒˆğŸŒ‰ğŸŒŠğŸŒ‹ğŸŒŒğŸŒğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœğŸŒğŸŒğŸŒŸğŸŒ ğŸŒ¡ğŸŒ¢ğŸŒ£ğŸŒ¤ğŸŒ¥ğŸŒ¦ğŸŒ§ğŸŒ¨ğŸŒ©ğŸŒªğŸŒ«ğŸŒ¬ğŸŒ­ğŸŒ®ğŸŒ¯ğŸŒ°ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¶ğŸŒ·ğŸŒ¸ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ½ğŸŒ¾ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ‘€ğŸ‘ğŸ‘‚ğŸ‘ƒğŸ‘„ğŸ‘…ğŸ‘†ğŸ‘‡ğŸ‘ˆğŸ‘‰ğŸ‘ŠğŸ‘‹ğŸ‘ŒğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘‘ğŸ‘’ğŸ‘“ğŸ‘”ğŸ‘•ğŸ‘–ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ‘ğŸ‘ŸğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘£ğŸ‘¤ğŸ‘¥ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘ªğŸ‘«ğŸ‘¬ğŸ‘­ğŸ‘®ğŸ‘¯ğŸ‘°ğŸ‘±ğŸ‘²ğŸ‘³ğŸ‘´ğŸ‘µğŸ‘¶ğŸ‘·ğŸ‘¸ğŸ‘¹ğŸ‘ºğŸ‘»ğŸ‘¼ğŸ‘½ğŸ‘¾ğŸ‘¿ğŸ’€ğŸ’ğŸ’‚ğŸ’ƒğŸ’„ğŸ’…ğŸ’†ğŸ’‡ğŸ’ˆğŸ’‰ğŸ’ŠğŸ’‹ğŸ’ŒğŸ’ğŸ’ğŸ’ğŸ’ğŸ’‘ğŸ’’ğŸ’“ğŸ’”ğŸ’•ğŸ’–ğŸ’—ğŸ’˜ğŸ’™ğŸ’šğŸ’›ğŸ’œğŸ’ğŸ’ğŸ’ŸğŸ’ ğŸ’¡ğŸ’¢ğŸ’£ğŸ’¤ğŸ’¥ğŸ’¦ğŸ’§ğŸ’¨ğŸ’©ğŸ’ªğŸ’«ğŸ’¬ğŸ’­ğŸ’®ğŸ’¯ğŸ’°ğŸ’±ğŸ’²ğŸ’³ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’¸ğŸ’¹ğŸ’ºğŸ’»ğŸ’¼ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ“ğŸ“‚ğŸ“ƒğŸ“„ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“ğŸ“‘ğŸ“’ğŸ““ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ“›ğŸ“œğŸ“ğŸ“ğŸ“ŸğŸ“ ğŸ“¡ğŸ“¢ğŸ“£ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“§ğŸ“¨ğŸ“©ğŸ“ªğŸ“«ğŸ“¬ğŸ“­ğŸ“®ğŸ“¯ğŸ“°ğŸ“±ğŸ“²ğŸ“³ğŸ“´ğŸ“µğŸ“¶ğŸ“·ğŸ“¸ğŸ“¹ğŸ“ºğŸ“»ğŸ“¼ğŸ“½ğŸ“¾ğŸ“¿ğŸ”€ğŸ”ğŸ”‚ğŸ”ƒğŸ”„ğŸ”…ğŸ”†ğŸ”‡ğŸ”ˆğŸ”‰ğŸ”ŠğŸ”‹ğŸ”ŒğŸ”ğŸ”ğŸ”ğŸ”ğŸ”‘ğŸ”’ğŸ”“ğŸ””ğŸ”•ğŸ”–ğŸ”—ğŸ”˜ğŸ”™ğŸ”šğŸ”›ğŸ”œğŸ”ğŸ”ğŸ”ŸğŸ” ğŸ”¡ğŸ”¢ğŸ”£ğŸ”¤ğŸ”¥ğŸ”¦ğŸ”§ğŸ”¨ğŸ”©ğŸ”ªğŸ”«ğŸ”¬ğŸ”­ğŸ”®ğŸ”¯ğŸ”°ğŸ”±ğŸ”²ğŸ”³ğŸ”´ğŸ”µğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹ğŸ”ºğŸ”»ğŸ”¼ğŸ”½Â¦Â©Â®Â°Ò‚ÖÖØØÛÛ©Û½Û¾ß¶à§ºà­°à¯³à¯´à¯µà¯¶à¯·à¯¸à¯ºà±¿àµàµ¹à¼à¼‚à¼ƒà¼“à¼•à¼–à¼—à¼šà¼›à¼œà¼à¼à¼Ÿà¼´à¼¶à¼¸à¾¾à¾¿à¿€à¿à¿‚à¿ƒà¿„à¿…à¿‡à¿ˆà¿‰à¿Šà¿‹à¿Œà¿à¿à¿•à¿–à¿—à¿˜á‚á‚Ÿáá‘á’á“á”á•á–á—á˜á™á¥€á§á§Ÿá§ á§¡á§¢á§£á§¤á§¥á§¦á§§á§¨á§©á§ªá§«á§¬á§­á§®á§¯á§°á§±á§²á§³á§´á§µá§¶á§·á§¸á§¹á§ºá§»á§¼á§½á§¾á§¿á­¡á­¢á­£á­¤á­¥á­¦á­§á­¨á­©á­ªá­´á­µá­¶á­·á­¸á­¹á­ºá­»á­¼â„€â„â„ƒâ„„â„…â„†â„ˆâ„‰â„”â„–â„—â„â„Ÿâ„ â„¡â„¢â„£â„¥â„§â„©â„®â„ºâ„»â…Šâ…Œâ…â…â†Šâ†‹â†•â†–â†—â†˜â†™â†œâ†â†â†Ÿâ†¡â†¢â†¤â†¥â†§â†¨â†©â†ªâ†«â†¬â†­â†¯â†°â†±â†²â†³â†´â†µâ†¶â†·â†¸â†¹â†ºâ†»â†¼â†½â†¾â†¿â‡€â‡â‡‚â‡ƒâ‡„â‡…â‡†â‡‡â‡ˆâ‡‰â‡Šâ‡‹â‡Œâ‡â‡â‡‘â‡“â‡•â‡–â‡—â‡˜â‡™â‡šâ‡›â‡œâ‡â‡â‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡¨â‡©â‡ªâ‡«â‡¬â‡­â‡®â‡¯â‡°â‡±â‡²â‡³âŒ€âŒâŒ‚âŒƒâŒ„âŒ…âŒ†âŒ‡âŒŒâŒâŒâŒâŒâŒ‘âŒ’âŒ“âŒ”âŒ•âŒ–âŒ—âŒ˜âŒ™âŒšâŒ›âŒœâŒâŒâŒŸâŒ¢âŒ£âŒ¤âŒ¥âŒ¦âŒ§âŒ¨âŒ«âŒ¬âŒ­âŒ®âŒ¯âŒ°âŒ±âŒ²âŒ³âŒ´âŒµâŒ¶âŒ·âŒ¸âŒ¹âŒºâŒ»âŒ¼âŒ½âŒ¾âŒ¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨â©âªâ«â¬â­â®â¯â°â±â²â³â´âµâ¶â·â¸â¹âºâ»â½â¾â¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›â¢â£â¤â¥â¦â§â¨â©âªâ«â¬â­â®â¯â°â±â²â³â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â‘€â‘â‘‚â‘ƒâ‘„â‘…â‘†â‘‡â‘ˆâ‘‰â‘Šâ’œâ’â’â’Ÿâ’ â’¡â’¢â’£â’¤â’¥â’¦â’§â’¨â’©â’ªâ’«â’¬â’­â’®â’¯â’°â’±â’²â’³â’´â’µâ’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“â“â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©â”€â”â”‚â”ƒâ”„â”…â”†â”‡â”ˆâ”‰â”Šâ”‹â”Œâ”â”â”â”â”‘â”’â”“â””â”•â”–â”—â”˜â”™â”šâ”›â”œâ”â”â”Ÿâ” â”¡â”¢â”£â”¤â”¥â”¦â”§â”¨â”©â”ªâ”«â”¬â”­â”®â”¯â”°â”±â”²â”³â”´â”µâ”¶â”·â”¸â”¹â”ºâ”»â”¼â”½â”¾â”¿â•€â•â•‚â•ƒâ•„â•…â•†â•‡â•ˆâ•‰â•Šâ•‹â•Œâ•â•â•â•â•‘â•’â•“â•”â••â•–â•—â•˜â•™â•šâ•›â•œâ•â•â•Ÿâ• â•¡â•¢â•£â•¤â•¥â•¦â•§â•¨â•©â•ªâ•«â•¬â•­â•®â•¯â•°â•±â•²â•³â•´â•µâ•¶â•·â•¸â•¹â•ºâ•»â•¼â•½â•¾â•¿â–€â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‰â–Šâ–‹â–Œâ–â–â–â–â–‘â–’â–“â–”â–•â––â–—â–˜â–™â–šâ–›â–œâ–â–â–Ÿâ– â–¡â–¢â–£â–¤â–¥â–¦â–§â–¨â–©â–ªâ–«â–¬â–­â–®â–¯â–°â–±â–²â–³â–´â–µâ–¶â–¸â–¹â–ºâ–»â–¼â–½â–¾â–¿â—€â—‚â—ƒâ—„â—…â—†â—‡â—ˆâ—‰â—Šâ—‹â—Œâ—â—â—â—â—‘â—’â—“â—”â—•â—–â——â—˜â—™â—šâ—›â—œâ—â—â—Ÿâ— â—¡â—¢â—£â—¤â—¥â—¦â—§â—¨â—©â—ªâ—«â—¬â—­â—®â—¯â—°â—±â—²â—³â—´â—µâ—¶â—·â˜€â˜â˜‚â˜ƒâ˜„â˜…â˜†â˜‡â˜ˆâ˜‰â˜Šâ˜‹â˜Œâ˜â˜â˜â˜â˜‘â˜’â˜“â˜”â˜•â˜–â˜—â˜˜â˜™â˜šâ˜›â˜œâ˜â˜â˜Ÿâ˜ â˜¡â˜¢â˜£â˜¤â˜¥â˜¦â˜§â˜¨â˜©â˜ªâ˜«â˜¬â˜­â˜®â˜¯â˜°â˜±â˜²â˜³â˜´â˜µâ˜¶â˜·â˜¸â˜¹â˜ºâ˜»â˜¼â˜½â˜¾â˜¿â™€â™â™‚â™ƒâ™„â™…â™†â™‡â™ˆâ™‰â™Šâ™‹â™Œâ™â™â™â™â™‘â™’â™“â™”â™•â™–â™—â™˜â™™â™šâ™›â™œâ™â™â™Ÿâ™ â™¡â™¢â™£â™¤â™¥â™¦â™§â™¨â™©â™ªâ™«â™¬â™­â™®â™°â™±â™²â™³â™´â™µâ™¶â™·â™¸â™¹â™ºâ™»â™¼â™½â™¾â™¿âš€âšâš‚âšƒâš„âš…âš†âš‡âšˆâš‰âšŠâš‹âšŒâšâšâšâšâš‘âš’âš“âš”âš•âš–âš—âš˜âš™âššâš›âšœ]*', '', replaced_text)  # çµµæ–‡å­—é™¤å»
    replaced_text = re.sub(r'[ê°€-í£]*', '', replaced_text)  # ãƒãƒ³ã‚°ãƒ«å‰Šé™¤
    replaced_text = re.sub(r'[{}]', ' ', replaced_text)  # {}ã®é™¤å»
    replaced_text = re.sub(r'\&?[lgr]t;?', ' ', replaced_text)  # rt, gt, ltã®é™¤å»
    replaced_text = re.sub(r'[ã€ã€‘]', ' ', replaced_text)       # ã€ã€‘ã®é™¤å»
    replaced_text = re.sub(r'[ï¼ˆï¼‰()]', ' ', replaced_text)     # ï¼ˆï¼‰ã®é™¤å»
    replaced_text = re.sub(r'[ï¼»ï¼½\[\]]', ' ', replaced_text)   # ï¼»ï¼½ã®é™¤å»
    replaced_text = re.sub(r'[@ï¼ ]\w+', '', replaced_text)  # ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã®é™¤å»
    replaced_text = re.sub(r'[#][\wä¸€-é¾¥ã-ã‚“ã‚¡-ãƒ³]+', '',
                           replaced_text)  # ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®é™¤å»
    replaced_text = re.sub(r'https?:\/\/.*', '', replaced_text)  # URLã®é™¤å»
    replaced_text = re.sub(r'pic\.twitter\.com\/.*', '',
                           replaced_text)  # pic.twitter.com/ã®é™¤å»
    replaced_text = re.sub(r'\.?twitter\.com\/.*', '',
                           replaced_text)  # .twitter.com/ã®é™¤å»
    replaced_text = re.sub(r'instagram\.com\/.*', '',
                           replaced_text)  # instagram.com/ã®é™¤å»
    replaced_text = re.sub(r'fashion-press\.net\/.*', '', replaced_text)
    replaced_text = re.sub(r'cookpad\.com\/.*', ' ', replaced_text)
    replaced_text = re.sub(r'news\.livedoor\.com\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.com\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.net\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.co\.jp\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.jp\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.it\/.*', '', replaced_text)
    replaced_text = re.sub(r'youtu\.be\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.me\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.mu|\.jp\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.jp\/.*', '', replaced_text)
    replaced_text = re.sub(r'\.ly\/.*', '', replaced_text)
    replaced_text = re.sub(
        r'(news|blog|fc2|headlines|link)(\.|\/).*', '', replaced_text)
    replaced_text = re.sub(r'([a-z]\&)?(amp|mp);[a-z]', '', replaced_text)
    replaced_text = re.sub(r'å†™çœŸ=.*', '', replaced_text)

    return replaced_text


def is_zh(in_str):  # ä¸­å›½èª(ç°¡ä½“å­—ã‚’å«ã‚€æ–‡)é™¤å»
    """
    SJISã«å¤‰æ›ã—ã¦æ–‡å­—æ•°ãŒæ¸›ã‚Œã°ç°¡ä½“å­—ãŒã‚ã‚‹ã®ã§ä¸­å›½èª
    """
    return (set(in_str) - set(in_str.encode('sjis', 'ignore').decode('sjis'))) != set([])


def zenkaku_hankaku(text):  # ã‚«ã‚¿ã‚«ãƒŠåŠè§’ã‚’å…¨è§’ã«, æ•°å­—è‹±å­—å…¨è§’ã‚’åŠè§’ã«
    re = mojimoji.zen_to_han(text, kana=False)
    re = mojimoji.han_to_zen(re, digit=False, ascii=False)
    return re


def wakati_by_mecab(text):  # mecabã§åˆ†ã‹ã¡æ›¸ãã™ã‚‹
    tagger = MeCab.Tagger('')
    tagger.parse('')
    node = tagger.parseToNode(text)
    word_list = []
    while node:
        pos = node.feature.split(",")[0]
        if pos in form_list:   # å¯¾è±¡ã¨ã™ã‚‹å“è©
            word = node.surface
            word_list.append(word)
        node = node.next
    return " ".join(word_list)

# Neologdã®å…¥ã‚Œæ–¹ã€‚Neologdã®è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«(è‡ªåˆ†ã¯/usr/local/lib/mecab/dic/mecab-ipadic-neologdã«ã‚ã£ãŸã€‚)ã‚’mecabrc(è‡ªåˆ†ã¯/usr/local/etc/mecabrcã«ã‚ã£ãŸ)
# ã®è¾æ›¸å‚ç…§ç®‡æ‰€ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚(è©²å½“ç®‡æ‰€ã¯dicdir =  /usr/local/lib/mecab/dic/mecab-ipadic-neologd)ã€‚æ³¨æ„ç‚¹ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«èµ·å‹•ç›´å¾Œã‚ˆã‚Šã‚‚ä¸Šã®éšå±¤ã«ã„ãã‹ã‚‰ã€æ°—ãŒä»˜ãã¥ã‚‰ã„å ´æ‰€ã«ã‚ã‚‹ã“ã¨ã€‚


def get_stopword_path():  # ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰ã®ãƒ‘ã‚¹ã‚’å–å¾—ã€‚ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿ç®¡ã—ã¦ãã ã•ã„
    name = os.path.dirname(os.path.abspath(__name__))
    joined_path = os.path.join(name, './stopwords.txt')
    data_path = os.path.normpath(joined_path)
    return data_path


def create_stopwords(file_path):  # ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆ(stopwords)ä½œæˆ
    stopwords = []
    for w in open(file_path, "r"):
        w = w.replace('\n', '')
        if len(w) > 0:
            stopwords.append(w)
    return stopwords


def wakati_mecab_remove_stopword(text):  # Mecab & ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰é™¤å»
    tagger = MeCab.Tagger('')
    tagger.parse('')
    node = tagger.parseToNode(text)
    word_list = []
    while node:
        pos = node.feature.split(",")[0]
        if pos in form_list:   # å¯¾è±¡ã¨ã™ã‚‹å“è©
            word = node.surface
            word_list.append(word)
        node = node.next
    # ã“ã“ã§ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰ã‚’é™¤å»ã—ã¾ã™
    # ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
    stopwords = create_stopwords(get_stopword_path())
    word_list = [word for word in word_list if word not in stopwords]
    return " ".join(word_list)


# å®Ÿè¡Œã™ã‚‹

t1 = time.time()
print("å‡¦ç†é–‹å§‹ã—ã¾ã—ãŸ")

big_form_list = [
    ["åè©", "å‹•è©", "å½¢å®¹è©"],
    ["åè©", "å‹•è©", "å½¢å®¹è©", "æ„Ÿå‹•è©", "å‰¯è©", "åŠ©è©", "è¨˜å·",
        "æ¥é ­è©", "åŠ©å‹•è©", "é€£ä½“è©", "ãƒ•ã‚£ãƒ©ãƒ¼", "ãã®ä»–"],
    ["åè©"],
    ["åè©", "å‹•è©", "å½¢å®¹è©", "æ„Ÿå‹•è©", "å‰¯è©", "åŠ©è©", "æ¥é ­è©", "åŠ©å‹•è©", "é€£ä½“è©", "ãƒ•ã‚£ãƒ©ãƒ¼", "ãã®ä»–"]
]

input_file = ["./rawdata/sample.txt",
              "./rawdata/twitter.txt", "./rawdata/yahoo.txt"]
output_file = ["./wakati_data/sample_nva.txt", "./wakati_data/sample_allform_wakati.txt",
               "./wakati_data/sample_noun_wakati.txt", "./wakati_data/sample_without_kigou_wakati.txt"]

for n_list in tqdm(range(len(big_form_list))):
    sleep(0.1)
    form_list = big_form_list[n_list]
    f = open(input_file[0], "r")  # TODO:input_fileã‚’forã§å›ã™ã€‚
    fw = open(output_file[n_list], "w")

    text = f.readline()

    while text:
        if len(text) < 10:  # æ–‡ç« ã¨ã—ã¦æ„å‘³ã‚’æŒãŸãªã„ãŸã‚ã€10æ–‡å­—ä»¥ä¸‹ã®æ–‡ç« ã¯ã‚¹ã‚­ãƒƒãƒ—
            text = f.readline()
            continue
        if is_zh(text):
            continue  # ä¸­å›½èªã®æ–‡ç« ã¯ã‚¹ã‚­ãƒƒãƒ—
        text = clean_text(text)
        text = zenkaku_hankaku(text)
        # text = wakati_by_mecab(text) #ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰é™¤å»ã‚’ã—ãŸããªã„å ´åˆã¯ã“ã¡ã‚‰ã‚’ã¤ã‹ã£ã¦ãã ã•ã„ã€‚
        text = wakati_mecab_remove_stopword(text)
        fw.write(text + "\n")
        text = f.readline()

    f.close
    fw.close

t2 = time.time()
elapsed_time = t2 - t1

print(f"å‡¦ç†ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚å®Ÿè¡Œæ™‚é–“ã¯{elapsed_time}ç§’ã§ã—ãŸ")
